import * as chai from 'chai';
import * as mocha from 'mocha';

import { Identification, IdentificationParCompteur, FormatIdentifiableIN, creerIdentificationParCompteur } from "../../bibliotheque/types";


describe('classe IdentificationParCompteur', () => {
    let identification: Identification<'test'>
        = creerIdentificationParCompteur("pref-");
    let val: FormatIdentifiableIN<'test'> = { ID: undefined, mutable : undefined };
    identification.identifier(val, (i) => { return { test: i }; });
    let r = JSON.stringify(val);
    let oracle = JSON.stringify({ ID : {test : "pref-0"}});
    it('renvoie ' + r, () => {
        chai.expect(r).to.equal(oracle);
    });
    identification.identifier(val, (i) => { return { test: i }; });
    r = JSON.stringify(val);
    oracle = JSON.stringify({ ID : {test : "pref-1"}});
    it('renvoie ' + r, () => {
        chai.expect(r).to.equal(oracle);
    }); 
});

